# 1. Init

Date: 2025-08-23

## Status

Accepted

## Context

We are starting a new standalone **Payments Service** that will provide a unified integration layer for multiple domains (shop, link, etc.) and external payment providers (Stripe, future providers).  
The service must handle payments, subscriptions, invoices, and webhooks in a consistent and secure way.  
We also define naming conventions for clarity across repositories and integrations.

## Decision

- Service name: **payments**.
- Architecture style: DDD / Clean Architecture with use cases as the main organizing principle.
- Naming conventions:
    - **Repository** → for persistence of aggregates (e.g., `PaymentRepository`, `SubscriptionRepository`).
    - **Provider/Gateway** → for external services (e.g., `StripeProvider`, `EmailGateway`).
    - **Publisher** → for event outbox/broker integrations (e.g., `OutboxPublisher`).
- Single entrypoint for provider webhooks (`/webhooks/{provider}`), with idempotent event processing.

## Consequences

- Clear service boundary between billing (accounting, pricing) and payments (processing).
- Consistent naming makes it obvious whether a dependency is a database, external API, or event broker.
- Easier extension to new providers and domains.
- Future migrations (e.g., moving a provider behind another service) are simplified thanks to clean abstractions.
